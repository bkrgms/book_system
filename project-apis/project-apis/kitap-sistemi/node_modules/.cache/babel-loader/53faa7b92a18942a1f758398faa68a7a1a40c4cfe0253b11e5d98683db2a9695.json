{"ast":null,"code":"\"use strict\";\n\n/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ChannelImplementation = void 0;\nconst channel_credentials_1 = require(\"./channel-credentials\");\nconst internal_channel_1 = require(\"./internal-channel\");\nclass ChannelImplementation {\n  constructor(target, credentials, options) {\n    if (typeof target !== 'string') {\n      throw new TypeError('Channel target must be a string');\n    }\n    if (!(credentials instanceof channel_credentials_1.ChannelCredentials)) {\n      throw new TypeError('Channel credentials must be a ChannelCredentials object');\n    }\n    if (options) {\n      if (typeof options !== 'object') {\n        throw new TypeError('Channel options must be an object');\n      }\n    }\n    this.internalChannel = new internal_channel_1.InternalChannel(target, credentials, options);\n  }\n  close() {\n    this.internalChannel.close();\n  }\n  getTarget() {\n    return this.internalChannel.getTarget();\n  }\n  getConnectivityState(tryToConnect) {\n    return this.internalChannel.getConnectivityState(tryToConnect);\n  }\n  watchConnectivityState(currentState, deadline, callback) {\n    this.internalChannel.watchConnectivityState(currentState, deadline, callback);\n  }\n  /**\n   * Get the channelz reference object for this channel. The returned value is\n   * garbage if channelz is disabled for this channel.\n   * @returns\n   */\n  getChannelzRef() {\n    return this.internalChannel.getChannelzRef();\n  }\n  createCall(method, deadline, host, parentCall, propagateFlags) {\n    if (typeof method !== 'string') {\n      throw new TypeError('Channel#createCall: method must be a string');\n    }\n    if (!(typeof deadline === 'number' || deadline instanceof Date)) {\n      throw new TypeError('Channel#createCall: deadline must be a number or Date');\n    }\n    return this.internalChannel.createCall(method, deadline, host, parentCall, propagateFlags);\n  }\n}\nexports.ChannelImplementation = ChannelImplementation;","map":{"version":3,"names":["channel_credentials_1","require","internal_channel_1","ChannelImplementation","constructor","target","credentials","options","TypeError","ChannelCredentials","internalChannel","InternalChannel","close","getTarget","getConnectivityState","tryToConnect","watchConnectivityState","currentState","deadline","callback","getChannelzRef","createCall","method","host","parentCall","propagateFlags","Date","exports"],"sources":["../../src/channel.ts"],"sourcesContent":[null],"mappings":";;AAAA;;;;;;;;;;;;;;;;;;;;AAiBA,MAAAA,qBAAA,GAAAC,OAAA;AAOA,MAAAC,kBAAA,GAAAD,OAAA;AAoEA,MAAaE,qBAAqB;EAGhCC,YACEC,MAAc,EACdC,WAA+B,EAC/BC,OAAuB;IAEvB,IAAI,OAAOF,MAAM,KAAK,QAAQ,EAAE;MAC9B,MAAM,IAAIG,SAAS,CAAC,iCAAiC,CAAC;IACxD;IACA,IAAI,EAAEF,WAAW,YAAYN,qBAAA,CAAAS,kBAAkB,CAAC,EAAE;MAChD,MAAM,IAAID,SAAS,CACjB,yDAAyD,CAC1D;IACH;IACA,IAAID,OAAO,EAAE;MACX,IAAI,OAAOA,OAAO,KAAK,QAAQ,EAAE;QAC/B,MAAM,IAAIC,SAAS,CAAC,mCAAmC,CAAC;MAC1D;IACF;IAEA,IAAI,CAACE,eAAe,GAAG,IAAIR,kBAAA,CAAAS,eAAe,CAACN,MAAM,EAAEC,WAAW,EAAEC,OAAO,CAAC;EAC1E;EAEAK,KAAKA,CAAA;IACH,IAAI,CAACF,eAAe,CAACE,KAAK,EAAE;EAC9B;EAEAC,SAASA,CAAA;IACP,OAAO,IAAI,CAACH,eAAe,CAACG,SAAS,EAAE;EACzC;EAEAC,oBAAoBA,CAACC,YAAqB;IACxC,OAAO,IAAI,CAACL,eAAe,CAACI,oBAAoB,CAACC,YAAY,CAAC;EAChE;EAEAC,sBAAsBA,CACpBC,YAA+B,EAC/BC,QAAuB,EACvBC,QAAiC;IAEjC,IAAI,CAACT,eAAe,CAACM,sBAAsB,CACzCC,YAAY,EACZC,QAAQ,EACRC,QAAQ,CACT;EACH;EAEA;;;;;EAKAC,cAAcA,CAAA;IACZ,OAAO,IAAI,CAACV,eAAe,CAACU,cAAc,EAAE;EAC9C;EAEAC,UAAUA,CACRC,MAAc,EACdJ,QAAkB,EAClBK,IAA+B,EAC/BC,UAAoC,EACpCC,cAAyC;IAEzC,IAAI,OAAOH,MAAM,KAAK,QAAQ,EAAE;MAC9B,MAAM,IAAId,SAAS,CAAC,6CAA6C,CAAC;IACpE;IACA,IAAI,EAAE,OAAOU,QAAQ,KAAK,QAAQ,IAAIA,QAAQ,YAAYQ,IAAI,CAAC,EAAE;MAC/D,MAAM,IAAIlB,SAAS,CACjB,uDAAuD,CACxD;IACH;IACA,OAAO,IAAI,CAACE,eAAe,CAACW,UAAU,CACpCC,MAAM,EACNJ,QAAQ,EACRK,IAAI,EACJC,UAAU,EACVC,cAAc,CACf;EACH;;AAhFFE,OAAA,CAAAxB,qBAAA,GAAAA,qBAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}